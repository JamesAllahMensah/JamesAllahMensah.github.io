<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="styles.css" rel="stylesheet">
    <title>GDIT Competitor Info - Main Page</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="scripts.js"></script>
</head>

<body>

<div class="header">
    <h1 class="mainHeading">IntelliHub - Competitor Intelligence Report</h1>
</div>
<div class="topnav">
    <img src="logos/longlogo.png" style="width: 20%; height: 15%;>">
    <a class="shortcut" id="blog" onclick="shortCut(this.id)">B L O G S</a>
    <a class="shortcut" id="social" onclick="shortCut(this.id)">S O C I A L S</a>
    <a class="shortcut" id="news" onclick="shortCut(this.id)">N E W S F E E D</a>
    <a class="shortcut" id="imsight" onclick="shortCut(this.id)">I N S I G H T S</a>
</div>

<div id="dropDown">
    <form>
        <label for="platform" style="margin: 0 auto;">Select Graph Source:</label>
        <select style = "margin-top: 5px; margin-left: 40px;" id="platform" name="platform" onchange="changeGraph(this.value); getType(this.value)">
        <option selected="selected" value="News">News</option>
        <option value="Blogs">Blogs</option>
        </select>
    </form>
</div>

<br><br>
<div id="canvasContainer">
</div>

<br><br>
<br><br><br><br>
<div class="subHeader">
    <h2 class="subHeader">We think. We act. We deliver.</h2>
</div>
<div id="Warning" style="visibility: hidden;">
    <h4 style="text-align: center;">Please Select a Competitor</h4>
</div>
<br>
<div id="appStructure">
    <div class="row">
        <div class="column">
            <div class="card" id="Accenture" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/accenture.png" style="width: 40%; height: 40%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="Booz Allen Hamilton" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/boozallen.png" style="width: 40%; height: 40%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="CACI International" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/CACI.png" style="width: 40%; height: 40%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="CGI Federal" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/CGI.png" style="width: 40%; height: 40%;">
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="column">
            <div class="card" id="Deloitte" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/deloitte.png" style="width: 50%; height: 50%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="Jacobs Technology" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/jacobs.png" style="width: 50%; height: 40%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="Leidos" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/leidos.png" style="width: 40%; height: 40%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="ManTech" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/mantech.png" style="width: 50%; height: 30%;">
                <br><br><br>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="column">
            <div class="card" id="Peraton" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/peraton.png" style="width: 60%; height: 30%;">
                <br><br><br><br>
            </div>
        </div>
        <div class="column">
            <div class="card" id="Perspecta" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/perspecta.png" style="width: 60%; height: 30%;">
                <br><br>
            </div>
        </div>
        <div class="column">
            <div class="card" id="SAIC-Engility" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/SAIC.png" style="width: 40%; height: 40%;">
            </div>
        </div>
        <div class="column">
            <div class="card" id="Lockheed Martin" onclick=loadApp(this.id);><br><br><br><br>
                <img src="logos/lockheed.png" style="width: 50%; height: 50%;">
            </div>
        </div>
    </div>

</div>

</body>

<script>


    /**
     * Loads post numerical data and creates graph with it
     */
    function initNewsGraph() {
        let fullData = getGraphData();
        let newsPostData = fullData[0];
        let newsGDIT = [338];
        generateGraph(newsPostData, newsGDIT);
    }

    initNewsGraph();

    /**
     * Changes the graph source based on the dropdown selection
     * @param type
     */
    function changeGraph(type) {
        let fullData = getGraphData();
        let numPosts = []
        let gditData = [];

        if (type !== "News" || type != "Socials" || type !== "Blogs") {
            numPosts = fullData[1];
            gditData.push(337);
            generateGraph(numPosts, gditData);
        }

        if (type === "News") {
            gditData = [];
            numPosts = fullData[1];
            gditData.push(338);
            console.log("News:" + gditData);
        } else if (type === "Blogs") {
            gditData = [];
            numPosts = fullData[0];
            gditData.push(145);
            console.log("Blogs:" + gditData);
        } else {
            numPosts = fullData[2];
        }
        generateGraph(numPosts, gditData);

    }

    /**
     * Returns the id of the selected graph type
     */
    function getType(graphType){
        return graphType;
    }

    /**
     * Using Charts.JS, loads number of competitor posts into 2D array
     * Populates the bar graph using the loaded data
     * @param data
     */
    function generateGraph(data, compData) {
        let initValue = compData[0];
        compData = [];
        for (let i = 0; i < data.length; i++) {
            compData.push(initValue);
        }

        let canvas_html = '<canvas id="myCanvas" width="10" height="5;"></canvas>';

        let label, gditLabel;
        let graphType = getType(document.getElementById("platform").value);
        if (graphType === "News") {
            label = "Competitor Activity # of News Posts'";
            gditLabel = "GDIT # of News Posts'";
        } else {
            label = "Competitor Activity # of Blog Posts";
            gditLabel = "GDIT # of Blog Posts";
        }

        document.getElementById("canvasContainer").innerHTML = canvas_html;
        let ctx = document.getElementById('myCanvas').getContext('2d');
        let myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Accenture', 'Booz Allen Hamilton', 'CACI International', 'CGI Federal', 'Deloitte', 'Jacobs Technology',
                    'Leidos', 'ManTech', 'Peraton', 'Perspecta', 'SAIC-Engility', 'Lockheed Martin'],
                datasets: [
                    {
                        label: gditLabel,
                        data: compData,
                        borderColor: ['rgba(192,192,192,1)'],
                        backgroundColor: ['rgba(192,192,192,0.2)'],
                        fill: true,
                        borderWidth: 2,
                        pointRadius: 0,
                        type: 'line',
                        hidden: true,
                    },
                    {
                        label: label,
                        data: data,
                        backgroundColor: [
                            'rgba(172, 11, 51, 0.2)',
                            'rgba(4, 159, 157, 0.2)',
                            'rgba(240, 16, 24, 0.2)',
                            'rgba(220, 20, 52, 0.2)',
                            'rgba(124, 196, 68, 0.2)',
                            'rgba(0, 82, 156, 0.2)',
                            'rgba(133, 15, 137, 0.2)',
                            'rgba(223, 35, 39, 0.2)',
                            'rgba(49, 94, 171, 0.2)',
                            'rgba(15, 69, 255, 0.2)',
                            'rgba(0, 107, 183, 0.2)',
                            'rgba(128, 130, 131, 0.2)'
                        ],
                        borderColor: [
                            'black',
                            'rgba(4, 159, 157, 1)',
                            'black',
                            'rgba(220, 20, 52, 1)',
                            'black',
                            'rgba(0, 82, 156, 1)',
                            'rgba(133, 15, 137, 1)',
                            'rgba(223, 35, 39, 1)',
                            'rgba(137, 202, 130, 1)',
                            'black',
                            'rgba(0, 107, 183, 1)',
                            'rgba(0, 93, 169, 1)'
                        ],
                        borderWidth: 1,
                    }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    }
</script>
</html>